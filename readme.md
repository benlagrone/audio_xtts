
### Run the service

```bash
docker compose up -d --build
```

The container boots the multi-speaker Coqui model `tts_models/en/vctk/vits` by default, so you can start synthesising immediately without supplying your own reference clip.

### Discover voices

```bash
curl http://127.0.0.1:5002/api/voices
```

Response fields:

- `builtin` – speakers embedded in the model (e.g. `p225`, `p226`, …)
- `cloned` – custom voices harvested from `voices/`
- `voices` – union of the two sets

### Synthesize speech

Pick one of the voice IDs and issue:

```bash
curl http://127.0.0.1:5002/api/tts \
     -H 'Content-Type: application/json' \
     -d '{"text":"Hello there","language":"en","voice":"p225"}' \
     --output hello.wav
```

If you omit `voice`, the service uses the first available builtin speaker or, when none exist, the first custom clip in `voices/`.

### Optional: add custom voices

Drop `.wav`, `.mp3`, `.flac`, or `.ogg` files into the `voices/` directory and redeploy. Each filename (without extension) becomes selectable via the `voice` field in `/api/tts`.

Once healthy, the API lives at `http://192.168.86.23:5002/api/tts` (adjust the host/port if you expose it differently).

To reach the service from machines outside the Docker host, make sure the compose file is
published on the host interface and that the server firewall allows inbound traffic.  By
default the stack binds to every interface (`TTS_BIND_IP=0.0.0.0`).  If you only want to
advertise a specific address, export it before composing, for example:

```bash
export TTS_BIND_IP=192.168.86.23
export TTS_PORT=5002
docker compose up -d
```

If Ubuntu's UFW firewall is enabled, allow the port with `sudo ufw allow 5002/tcp`.

You can verify the deployment from any client on the network by visiting
`http://192.168.86.23:5002/docs` for the autogenerated OpenAPI documentation or by POSTing
to `http://192.168.86.23:5002/api/tts`.

### 3. Point the render stack at xTTS

Back in your render project directory:

```bash
echo "XTTS_API_URL=http://xtts:5002" >> .env
# optional overrides
echo "XTTS_LANGUAGE=en" >> .env
```

Redeploy the render stack so it reads the updated `.env`:
